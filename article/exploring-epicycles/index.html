<!DOCTYPE html><html lang="en"><head><title>Exploring Epicycles - Ken’s Developer Portfolio</title><meta charSet="utf-8"/><link rel="icon" href="/_next/static/media/favicon.74f1eb8a.ico"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="Come with me on the journey to explore the Fourier transform, and how we can use that to compute epicycles."/><meta name="language" content="english"/><meta name="copyright" content="Kenneth-LJS"/><meta name="distribution" content="global"/><meta property="og:title" content="Exploring Epicycles - Ken’s Developer Portfolio"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.kenneth-ljs.com/article/exploring-epicycles/"/><meta property="og:description" content="Come with me on the journey to explore the Fourier transform, and how we can use that to compute epicycles."/><meta property="og:image" content="https://www.kenneth-ljs.com/article/exploring-epicycles/thumbnail.png"/><meta property="og:image:type" content="image/jpeg"/><meta property="og:image:width" content="1000"/><meta property="og:image:height" content="1000"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:title" content="Exploring Epicycles - Ken’s Developer Portfolio"/><meta property="twitter:description" content="Come with me on the journey to explore the Fourier transform, and how we can use that to compute epicycles."/><meta property="twitter:image" content="https://www.kenneth-ljs.com/article/exploring-epicycles/thumbnail.png"/><meta property="twitter:url" content="https://www.kenneth-ljs.com/article/exploring-epicycles/"/><meta property="twitter:domain" content="kenneth-ljs.com"/><link rel="preload" as="image" href="/article/exploring-epicycles/banner.webp"/><meta name="next-head-count" content="23"/><link rel="preload" href="/_next/static/css/96edbc607d4b17f0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/96edbc607d4b17f0.css" data-n-g=""/><link rel="preload" href="/_next/static/css/581e0a3ec8a959c1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/581e0a3ec8a959c1.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-50116e63224baba2.js" defer=""></script><script src="/_next/static/chunks/main-3ee22cc5cd2ba8df.js" defer=""></script><script src="/_next/static/chunks/pages/_app-03bbd27282f070a7.js" defer=""></script><script src="/_next/static/chunks/757-71211cc05fe5710f.js" defer=""></script><script src="/_next/static/chunks/187-88a9c6f910f35f09.js" defer=""></script><script src="/_next/static/chunks/646-edf455176e521f43.js" defer=""></script><script src="/_next/static/chunks/pages/article/exploring-epicycles-2f8340b94a314f01.js" defer=""></script><script src="/_next/static/4VUm-0VpXht5Yh44Sq6hc/_buildManifest.js" defer=""></script><script src="/_next/static/4VUm-0VpXht5Yh44Sq6hc/_ssgManifest.js" defer=""></script><style id="__jsx-413896030">html{font-size:18px;color:#eee}body::before{z-index:-1;content:"";position:fixed;inset:0;background-image:url("/_next/static/media/bg.15d5bb7f.png");background-position:center;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;background-attachment:fixed;background-color:#1f2834;background-blend-mode:color-burn}</style></head><body><div id="__next"><div class="jsx-413896030 basic-layout_page__ZDOnt"><div id="top" class="jsx-413896030"></div><div class="nav_navPlaceholder__CWYB7"></div><div class="nav_navContainer__rjN75" style="z-index:1000"><nav class="nav_nav__W__TS"><div class="nav_navBrandContainer__63F1X"><a tabindex="0" href="/#top"><div class="nav_navBrandImgContainer__WnhV_" style="aspect-ratio:100 / 100"><img alt="LIFC Logo" src="/_next/static/media/logo.3a54d410.png" decoding="async" data-nimg="fill" loading="lazy" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent"/></div></a></div><div class="nav_navMobileToggle__a5RSd" tabindex="0"><div class="nav_navMobileToggleBar1__i_RJs"></div><div class="nav_navMobileToggleBar2__RjpxR"></div><div class="nav_navMobileToggleBar3__hymqG"></div></div><div class="nav_navMobileToggleActiveBlock__Xbzk1"></div><div class="nav_navLinks__d901P"><div class="nav_navLinkContainer__9WK_y"><a class="nav_navLink__wzVGa" tabindex="0" href="/#about-me">About Me</a></div><div class="nav_navLinkContainer__9WK_y"><a class="nav_navLink__wzVGa" tabindex="0" href="/#experience">Experience</a></div><div class="nav_navLinkContainer__9WK_y"><a class="nav_navLink__wzVGa" tabindex="0" href="/#skills">Skills</a></div><div class="nav_navLinkContainer__9WK_y"><a class="nav_navLink__wzVGa" tabindex="0" href="/#portfolio">Portfolio</a></div><div class="nav_navLinkContainer__9WK_y"><a class="nav_navLink__wzVGa" tabindex="0" href="/#resume">Resume</a></div><div class="nav_navLinkContainer__9WK_y"><a class="nav_navLink__wzVGa" tabindex="0" href="/#contact">Contact</a></div></div></nav></div><div style="--inner-page-min-height:calc(100vh - 0px)" class="jsx-413896030 basic-layout_innerPage__VVAIz"><div class="page_headerContainer__rzIn8"><img alt="" src="/article/exploring-epicycles/banner.webp" decoding="async" data-nimg="fill" class="page_headerBackground__E1Yh7" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent"/><div class="page_headerContent__FT7K_"><div class="page_markdown__21Yyp"><header>
<h1>Exploring Epicycles</h1>
<p>A fun and mathematical journey into discovering complex numbers, Fourier transforms, and the secrets to drawing anything with circles</p>
<p><a href="/project/shard-game/" target="_blank" rel="noopener noreferrer">Source Code</a></p>
<p align="center">
  Post in progress! Check back again.
</p>
</header></div></div></div><div class="jsx-413896030 basic-layout_contentContainer__lVlG6"><main class="jsx-413896030 basic-layout_content__teZLy"><section class="section_sectionContent__Ecx81"><div style="--code-font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace"><div class="page_markdown__21Yyp"><div style="display:none">
Outline:
Motivation
I’ve seen those cool youtube vids: https://www.youtube.com/watch?v=QVuU2YCwHjw
I went down a rabbit hole of exploring Fourier transforms, etc
But I never really understood how to get from a Fourier transform to a video like that.
So let’s explore that together. For this, I assume you have a brief understanding of complex numbers
Fourier Transform (brief intro)
1D signal -&gt; 1D array of numbers
You get a 1D array back
The array index = strength of that frequency. Since no time units, use the array index as “time”
Taking it to 2D
This was where I got lost. How do you get anywhere from here? Do we do a 2D fourier transform? How do we get the X and Y coordinates into this formula?
Our inputs: (X, Y) coordinates over time
Idea 1: Take X and Y and fourier transform separately
???
Idea 2: 2D fourier transform? but how do we put those numbers into a 2D grid?
Idea 3: 1D signal of complex numbers -&gt; 1D array complex numbers, since it’s still a 1D transformation
But how does this translate into epicycles? My understanding is each circle needs a corresponding frequency and amplitude, but how do we know what phase?
Turns out in the 1D signal, you do get a complex number back too. That encodes the phase.
In 2D, you’re given a complex number back that indicates the phase. In fact, the complex number already includes 2 things: the size (the abs of the complex number), and the phase (the arg of the complex number). Then as before, the frequency is given by the index.
Putting It Together
Run the numpy libraries
PILLOW to make the images. We take all the circles, sort them in decreasing order of size, then render them on a provided base image
We then use FFMPEG with the following command to render the video
Conclusion
THERE. This final project was years in the making of coming back to the Fourier transform, etc. And it’s finally done! I can rest well.
</div>
<h2>Circles and Simpsons</h2>
<p>Years ago, I came across this video on YouTube that showed a drawing of Homer Simpsons drawn by rotating circles of different radii and speeds.</p>
<p align="center">
  <iframe style="width:min(100%, 600px);aspect-ratio:4 / 3" src="https://www.youtube.com/embed/QVuU2YCwHjw" title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
</p>
<p>“Man,” I thought, “wouldn’t it be cool to be able to do this someday?”</p>
<p>That started me on a journey of Mathematics that I was more than happy to indulge in. I learnt that these rotating circles were called epicycles. Ptolemy, a Greek mathematician and astronomer, theorised that with enough rotating circles, you could trace the movement of every celestial body. Turns out he was right, except that it’s not just planetary movements that you can predict, but literally every periodic motion. And that includes that outline of Homer Simpson.</p>
<p>To get these cycles, there’s something called the Fourier transform. If this concept is new to you, I recommend reading <a href="https://www.3blue1brown.com/lessons/fourier-transforms" target="_blank" rel="noopener noreferrer">But what is the Fourier Transform?</a> by Grant Sanderson (also known as <a href="https://www.youtube.com/@3blue1brown" target="_blank" rel="noopener noreferrer">3Blue1Brown</a> on YouTube). The rest of this post is going to get pretty maths-heavy, so familiarise yourself with complex numbers and Fourier transforms before we go on. Hang on tight!</p>
<p>Fourier Transforms
To briefly summarise, the Fourier transform is a way to split a signal into its constituent frequencies.</p>
<p>[graph of how one frequency splits into multiple]</p>
<p>Mathematicians like to call this the “transformation of a signal from the time domain to the frequency domain”. That’s nice, but it still doesn’t explain how I can draw Homer Simpson with circles. Instead, let’s turn to the programmer’s way of understanding functions: input and output.</p>
<p>In the classic Fourier transform, we take a signal as an input, which we represent as amplitude over time. As output, we get a breakdown of frequencies. For instance, in the illustration below, the two frequencies that make up the following signal are represented by the two peaks in the output graph.</p>
<p>[graph of 2 frequencies getting split, then show how it corresponds to the peaks]</p>
<p>One problem: we can’t represent a continuous signal in finite data, but what we can do is to break it down into discrete samples and apply a discrete Fourier transform.</p>
<p>[graph of continuous to discrete signal, then graph of its FFT]</p>
<p>Back to the input-output explanation. Our input is an array of amplitudes. In this case, the time component is embedded in the array index. Our output is a 1D array of numbers representing the “strength” of each frequency.</p>
<p>[show how the array also embeds time]</p>
<p>[show how in the frequency domain, the amplitude is represented by the y axis, freq is represented by the x axis]</p>
<p>But this is where I got stuck. How do you get from this to spinning circles that trace out an image?</p>
<h2>2D Fourier Transform</h2>
<p>A signal is 1-dimensional: amplitude over time. Epicycles, however, are 2-dimensional: x and y coordinates over time, right? Nope. 2D Fourier transforms take on a very different shape from what we’re looking for.</p>
<p>[image of 2d fourier transform]</p>
<p>Input:
2D array of amplitudes over x/y space</p>
<p>Output
2D array of amplitudes over frequency space</p>
<p>TODO</p></div></div></section></main></div></div><footer class="footer_footer__6AImX"><div class="footer_footerContent__shqlb">Designed and built from scratch by @Kenneth-LJS with NextJS and SCSS!</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/article/exploring-epicycles","query":{},"buildId":"4VUm-0VpXht5Yh44Sq6hc","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>